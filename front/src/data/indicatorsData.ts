// Correspondance entre les indicateurs et les besoins (fonctions-clés) du Diag360
// Chaque indicateur peut être lié à plusieurs besoins

export interface Indicator {
  id: string;
  label: string;
  category: string; // Vitaux, Essentiels, Induits
  primaryNeed: string; // Besoin principal
  secondaryNeeds?: string[]; // Besoins secondaires
  score?: number; // Score simulé pour la démo (0-100)
}

// Mapping des besoins du spreadsheet vers les keys de notre système
export const needsMapping: Record<string, string> = {
  "Avoir accès à l'eau douce": "score_water",
  "Se nourrir": "score_food",
  "Se loger": "score_housing",
  "Se soigner": "score_healthcare",
  "Être en sécurité": "score_security",
  "S'informer et s'instruire": "score_education",
  "Vivre ensemble": "score_social_cohesion",
  "Vivre ensemble et faire société": "score_social_cohesion",
  "Être en lien avec la nature": "score_nature",
  "Produire et s'approvisionner localement": "score_local_economy",
  "Avoir accès à l'énergie": "score_energy",
  "Se déplacer": "score_mobility",
};

// Indicateurs organisés par besoin principal
export const indicatorsByNeed: Record<string, Indicator[]> = {
  score_water: [
    { id: "eau_1", label: "Couverture effective du territoire par au moins un outil de planification et de gestion de l'eau (SAGE, PGRE, PTGE, contrat de milieu)", category: "Vitaux", primaryNeed: "score_water" },
    { id: "eau_2", label: "Existence d'un schéma directeur de l'eau potable de moins de 10 ans", category: "Vitaux", primaryNeed: "score_water" },
    { id: "eau_3", label: "Identification d'un agent-référent sur les enjeux relatifs à l'eau", category: "Vitaux", primaryNeed: "score_water", secondaryNeeds: ["score_food"] },
    { id: "eau_4", label: "Identification d'un élu-référent sur les enjeux relatifs à l'eau", category: "Vitaux", primaryNeed: "score_water", secondaryNeeds: ["score_food"] },
    { id: "eau_5", label: "Taux de conformité physicochimique de l'eau distribuée au robinet", category: "Vitaux", primaryNeed: "score_water" },
    { id: "eau_6", label: "Taux de conformité microbiologique de l'eau distribuée au robinet", category: "Vitaux", primaryNeed: "score_water" },
    { id: "eau_7", label: "Existence d'un diagnostic territorial sur les conditions d'accès à l'eau de consommation humaine", category: "Vitaux", primaryNeed: "score_water" },
    { id: "eau_8", label: "Mise en œuvre de mesures permettant de garantir l'accès à l'eau de consommation humaine (Art. L2224-7-3 CGCT)", category: "Vitaux", primaryNeed: "score_water" },
    { id: "eau_9", label: "Existence de dispositifs de protection sociale des abonnés pour l'accès à l'eau", category: "Vitaux", primaryNeed: "score_water", secondaryNeeds: ["score_social_cohesion"] },
    { id: "eau_10", label: "Part moyenne du territoire en alerte sécheresse en période estivale", category: "Vitaux", primaryNeed: "score_water", secondaryNeeds: ["score_food"] },
    { id: "eau_11", label: "Existence et mise en œuvre d'un Plan de gestion de la sécurité sanitaire des eaux (PGSSE)", category: "Vitaux", primaryNeed: "score_water" },
    { id: "eau_12", label: "Fréquence des interruptions de service non programmées pour l'eau potable", category: "Vitaux", primaryNeed: "score_water" },
    { id: "eau_13", label: "Durée d'autonomie du service d'eau", category: "Vitaux", primaryNeed: "score_water" },
    { id: "eau_14", label: "Existence de ressources alternatives pour l'alimentation en eau potable (interconnexion, stocks stratégiques)", category: "Vitaux", primaryNeed: "score_water" },
    { id: "eau_15", label: "Indice Linéaire des Volumes non comptés (ILVNC)", category: "Vitaux", primaryNeed: "score_water" },
    { id: "eau_16", label: "Existence d'une tarification progressive de l'eau", category: "Vitaux", primaryNeed: "score_water", secondaryNeeds: ["score_social_cohesion"] },
    { id: "eau_17", label: "Prélèvements d'eau à usage domestique par habitant et par an", category: "Vitaux", primaryNeed: "score_water" },
    { id: "eau_18", label: "Conformité des performances des équipements d'épuration", category: "Vitaux", primaryNeed: "score_water" },
    { id: "eau_19", label: "Part de l'approvisionnement en eau douce issus de sources superficielles", category: "Vitaux", primaryNeed: "score_water", secondaryNeeds: ["score_food"] },
  ],
  score_food: [
    { id: "alim_1", label: "Adéquation théorique entre la production agricole et la consommation du territoire", category: "Vitaux", primaryNeed: "score_food" },
    { id: "alim_2", label: "Part de la surface agricole en agriculture Biologique sur la surface agricole utile", category: "Vitaux", primaryNeed: "score_food" },
    { id: "alim_3", label: "Part de la Surface Agricole Utile sur la superficie totale du territoire", category: "Vitaux", primaryNeed: "score_food", secondaryNeeds: ["score_local_economy"] },
    { id: "alim_4", label: "Quantité annuelle d'achats de substances actives rapporté à la SAU du territoire", category: "Vitaux", primaryNeed: "score_food", secondaryNeeds: ["score_local_economy"] },
    { id: "alim_5", label: "Score « Haute Valeur Naturelle »", category: "Vitaux", primaryNeed: "score_food", secondaryNeeds: ["score_local_economy", "score_social_cohesion"] },
    { id: "alim_6", label: "Identification d'un agent-référent sur les enjeux de sauvegarde", category: "Vitaux", primaryNeed: "score_food" },
    { id: "alim_7", label: "Identification d'un élu-référent sur les enjeux de sauvegarde", category: "Vitaux", primaryNeed: "score_food", secondaryNeeds: ["score_mobility"] },
    { id: "alim_8", label: "Part des communes couvertes par un PCS adopté depuis 2020", category: "Vitaux", primaryNeed: "score_food", secondaryNeeds: ["score_healthcare"] },
    { id: "alim_9", label: "Nombre de risques majeurs auxquels sont exposées les communes du territoire", category: "Vitaux", primaryNeed: "score_food", secondaryNeeds: ["score_local_economy"] },
    { id: "alim_10", label: "Part des communes dotées d'une Réserve Citoyenne de Sécurité Civile (RCSC)", category: "Vitaux", primaryNeed: "score_food", secondaryNeeds: ["score_local_economy"] },
    { id: "alim_11", label: "Existence d'un recensement des sites et événements sensibles", category: "Vitaux", primaryNeed: "score_food", secondaryNeeds: ["score_healthcare"] },
    { id: "alim_12", label: "Identification dans un document-cadre des associations agréées de sécurité civile", category: "Vitaux", primaryNeed: "score_food", secondaryNeeds: ["score_local_economy"] },
    { id: "alim_13", label: "Existence d'un document-cadre en matière de résilience numérique à jour et mis en oeuvre", category: "Vitaux", primaryNeed: "score_food", secondaryNeeds: ["score_healthcare"] },
    { id: "alim_14", label: "Existence d'une Convention Territoriale Globale (CTG) comprenant une analyse des besoins sociaux", category: "Vitaux", primaryNeed: "score_food", secondaryNeeds: ["score_nature"] },
  ],
  score_housing: [
    { id: "log_1", label: "Existence d'un Plan Local de l'Habitat (PLH) à jour et mis en oeuvre", category: "Vitaux", primaryNeed: "score_housing" },
    { id: "log_2", label: "Nombre de personnes sans domicile fixe pour 100.000 habitants", category: "Vitaux", primaryNeed: "score_housing" },
    { id: "log_3", label: "Part des logements en situation de sur-occupation", category: "Vitaux", primaryNeed: "score_housing", secondaryNeeds: ["score_social_cohesion"] },
    { id: "log_4", label: "Part des logements en situation de sous-occupation très accentuée", category: "Vitaux", primaryNeed: "score_housing", secondaryNeeds: ["score_social_cohesion"] },
    { id: "log_5", label: "Taux de précarité énergétique liée au logement", category: "Vitaux", primaryNeed: "score_housing", secondaryNeeds: ["score_social_cohesion"] },
    { id: "log_6", label: "Taux de résidences secondaires", category: "Vitaux", primaryNeed: "score_housing", secondaryNeeds: ["score_social_cohesion"] },
    { id: "log_7", label: "Part des logements sociaux dans l'ensemble des logements", category: "Vitaux", primaryNeed: "score_housing", secondaryNeeds: ["score_energy"] },
    { id: "log_8", label: "Taux de logements vacants", category: "Vitaux", primaryNeed: "score_housing", secondaryNeeds: ["score_social_cohesion"] },
    { id: "log_9", label: "Existence d'un document identifiant les zones de logement exposées aux risques climatiques", category: "Vitaux", primaryNeed: "score_housing", secondaryNeeds: ["score_social_cohesion"] },
    { id: "log_10", label: "Nombre de places d'hébergement généraliste pour les personnes vulnérables pour 100.000 hab.", category: "Vitaux", primaryNeed: "score_housing" },
    { id: "log_11", label: "Identification (dans un document-cadre) des lieux refuge de chaque commune", category: "Vitaux", primaryNeed: "score_housing", secondaryNeeds: ["score_security"] },
    { id: "log_12", label: "Existence de dispositions permettant de répondre au besoin de logement des résidents", category: "Vitaux", primaryNeed: "score_housing", secondaryNeeds: ["score_social_cohesion"] },
    { id: "log_13", label: "Part des logements passoires énergétiques (étiquettes F ou G)", category: "Vitaux", primaryNeed: "score_housing", secondaryNeeds: ["score_security"] },
    { id: "log_14", label: "Part des résidences principales chauffées au gaz ou au fioul", category: "Vitaux", primaryNeed: "score_housing", secondaryNeeds: ["score_social_cohesion"] },
    { id: "log_15", label: "Mise en œuvre effective du service public de la rénovation de l'habitat", category: "Vitaux", primaryNeed: "score_housing", secondaryNeeds: ["score_energy"] },
    { id: "log_16", label: "Part de la population éloignée des équipements de services de proximité (plus de 7 minutes)", category: "Vitaux", primaryNeed: "score_housing", secondaryNeeds: ["score_social_cohesion"] },
  ],
  score_healthcare: [
    { id: "sante_1", label: "Part de la population éloignée des soins de proximité (pharmacie, médecin, kiné, infirmier, dentiste)", category: "Vitaux", primaryNeed: "score_healthcare" },
    { id: "sante_2", label: "Densité d'officines de Pharmacie", category: "Vitaux", primaryNeed: "score_healthcare" },
    { id: "sante_3", label: "Accessibilité potentielle localisée (APL) aux infirmiers de 65 ans et moins", category: "Vitaux", primaryNeed: "score_healthcare", secondaryNeeds: ["score_nature"] },
    { id: "sante_4", label: "Accessibilité potentielle localisée (APL) aux sage-femmes de 65 ans et moins", category: "Vitaux", primaryNeed: "score_healthcare" },
    { id: "sante_5", label: "Accessibilité Potentielle Localisée aux Chirurgiens-Dentistes de 65 ans et moins", category: "Vitaux", primaryNeed: "score_healthcare", secondaryNeeds: ["score_mobility"] },
    { id: "sante_6", label: "Taux d'équipement en Médecine-Chirurgie-Obstétrique (nombre de lits / places)", category: "Vitaux", primaryNeed: "score_healthcare", secondaryNeeds: ["score_mobility"] },
    { id: "sante_7", label: "Présence d'une structure de santé de type SU et SMUR", category: "Vitaux", primaryNeed: "score_healthcare", secondaryNeeds: ["score_social_cohesion"] },
    { id: "sante_8", label: "Part des forêts et milieux semi-naturels sur la surface totale du territoire", category: "Vitaux", primaryNeed: "score_healthcare" },
    { id: "sante_9", label: "Nombre d'établissements industriels dépassant les seuils de déclaration d'émission de polluants", category: "Vitaux", primaryNeed: "score_healthcare" },
    { id: "sante_10", label: "Part du territoire en zone protégée", category: "Vitaux", primaryNeed: "score_healthcare" },
    { id: "sante_11", label: "Nombre de jours d'épisode de pollution de l'air par an", category: "Vitaux", primaryNeed: "score_healthcare" },
    { id: "sante_12", label: "Existence d'un coefficient de biotope ou de pleine terre dans le PLU", category: "Vitaux", primaryNeed: "score_healthcare", secondaryNeeds: ["score_security"] },
    { id: "sante_13", label: "Existence d'un Contrat Local de Santé à jour et en cours de mise en oeuvre", category: "Vitaux", primaryNeed: "score_healthcare" },
    { id: "sante_14", label: "Accessibilité potentielle localisée (APL) aux médecins généralistes de 65 ans et moins", category: "Vitaux", primaryNeed: "score_healthcare" },
  ],
  score_security: [
    { id: "secu_1", label: "Reconnaissance de l'engagement de l'Office de Tourisme dans la transition écologique", category: "Vitaux", primaryNeed: "score_security" },
    { id: "secu_2", label: "Part des ménages d'une seule personne", category: "Vitaux", primaryNeed: "score_security" },
    { id: "secu_3", label: "Taux de pauvreté", category: "Vitaux", primaryNeed: "score_security" },
    { id: "secu_4", label: "Part des jeunes (15-24 ans) non insérés", category: "Vitaux", primaryNeed: "score_security" },
    { id: "secu_5", label: "Taux de participation aux élections municipales 2020", category: "Vitaux", primaryNeed: "score_security" },
    { id: "secu_6", label: "Taux de couverture accueil jeune enfant pour 100 enfants de moins de 3 ans", category: "Vitaux", primaryNeed: "score_security", secondaryNeeds: ["score_social_cohesion"] },
    { id: "secu_7", label: "Nombre d'associations pour 1000 habitants", category: "Vitaux", primaryNeed: "score_security" },
    { id: "secu_8", label: "Nombre de structures de l'animation de la vie sociale agréée par la CAF pour 100.000 habitants", category: "Vitaux", primaryNeed: "score_security", secondaryNeeds: ["score_social_cohesion"] },
    { id: "secu_9", label: "Nombre d'événements grand public festifs et fédérateurs par an pour 100.000 habitants", category: "Vitaux", primaryNeed: "score_security" },
    { id: "secu_10", label: "Part de la population en emploi précaire", category: "Vitaux", primaryNeed: "score_security", secondaryNeeds: ["score_social_cohesion"] },
    { id: "secu_11", label: "Nombre de licenciés sportifs pour 100 habitants", category: "Vitaux", primaryNeed: "score_security", secondaryNeeds: ["score_energy"] },
  ],
  score_education: [
    { id: "educ_1", label: "Existence d'un dispositif d'éco-conditionnalité des aides aux acteurs et projets associatifs", category: "Essentiels", primaryNeed: "score_education", secondaryNeeds: ["score_social_cohesion"] },
    { id: "educ_2", label: "Identification d'un agent-référent sur les enjeux éducationnels et informationnels", category: "Essentiels", primaryNeed: "score_education", secondaryNeeds: ["score_social_cohesion"] },
    { id: "educ_3", label: "Identification d'un élu-référent sur les enjeux éducationnels et informationnels", category: "Essentiels", primaryNeed: "score_education", secondaryNeeds: ["score_social_cohesion"] },
    { id: "educ_4", label: "Identification d'un agent-référent sur les enjeux alimentaires", category: "Essentiels", primaryNeed: "score_education" },
    { id: "educ_5", label: "Identification d'un élu-référent sur les enjeux alimentaires", category: "Essentiels", primaryNeed: "score_education", secondaryNeeds: ["score_mobility"] },
    { id: "educ_6", label: "Existence d'un Projet Alimentaire Territorial à jour et mis en oeuvre", category: "Essentiels", primaryNeed: "score_education" },
    { id: "educ_7", label: "Evolution de la Surface Agricole Utile entre 2010 et 2020", category: "Essentiels", primaryNeed: "score_education" },
    { id: "educ_8", label: "Nombre de marchés alimentaires hebdomadaires pour 1000 habitants", category: "Essentiels", primaryNeed: "score_education", secondaryNeeds: ["score_social_cohesion"] },
    { id: "educ_9", label: "Accessibilité théorique aux commerces alimentaires à vélo", category: "Essentiels", primaryNeed: "score_education" },
    { id: "educ_10", label: "Part de la restauration collective respectant les critères Egalim", category: "Essentiels", primaryNeed: "score_education" },
    { id: "educ_11", label: "Évolution des actifs agricoles entre 2008 et 2019", category: "Essentiels", primaryNeed: "score_education" },
  ],
  score_social_cohesion: [
    { id: "soc_1", label: "Rapport interdécile du niveau de vie (9e décile / 1er décile)", category: "Essentiels", primaryNeed: "score_social_cohesion" },
    { id: "soc_2", label: "Différence entre le taux d'emploi des femmes et des hommes", category: "Essentiels", primaryNeed: "score_social_cohesion", secondaryNeeds: ["score_education"] },
    { id: "soc_3", label: "Nombre de travailleurs sociaux pour 100 allocataires du RSA", category: "Essentiels", primaryNeed: "score_social_cohesion", secondaryNeeds: ["score_healthcare"] },
    { id: "soc_4", label: "Part des communes de plus de 1000 habitants ayant mis en oeuvre leur PAVE", category: "Essentiels", primaryNeed: "score_social_cohesion", secondaryNeeds: ["score_healthcare"] },
    { id: "soc_5", label: "Part des femmes dans l'exécutif communautaire", category: "Essentiels", primaryNeed: "score_social_cohesion", secondaryNeeds: ["score_local_economy", "score_education"] },
    { id: "soc_6", label: "Identification d'un agent-référent sur les enjeux de cohésion sociale", category: "Essentiels", primaryNeed: "score_social_cohesion", secondaryNeeds: ["score_education"] },
    { id: "soc_7", label: "Identification d'un élu-référent sur les enjeux de cohésion sociale", category: "Essentiels", primaryNeed: "score_social_cohesion" },
    { id: "soc_8", label: "Inventaire des zones humides", category: "Essentiels", primaryNeed: "score_social_cohesion" },
    { id: "soc_9", label: "Taux de concentration de l'emploi", category: "Essentiels", primaryNeed: "score_social_cohesion", secondaryNeeds: ["score_education"] },
    { id: "soc_10", label: "Existence d'une recyclerie ou ressourcerie intercommunale", category: "Essentiels", primaryNeed: "score_social_cohesion" },
    { id: "soc_11", label: "Taux de couverture des besoins en électricité par les ENR locales", category: "Essentiels", primaryNeed: "score_social_cohesion" },
    { id: "soc_12", label: "Taux de couverture des besoins en chaleur par les ENR locales", category: "Essentiels", primaryNeed: "score_social_cohesion" },
    { id: "soc_13", label: "Existence de capacités de back-up électriques pour les bâtiments publics critiques", category: "Essentiels", primaryNeed: "score_social_cohesion" },
    { id: "soc_14", label: "Distance à la pharmacie la plus proche", category: "Essentiels", primaryNeed: "score_social_cohesion" },
    { id: "soc_15", label: "Distance au service d'urgence le plus proche", category: "Essentiels", primaryNeed: "score_social_cohesion", secondaryNeeds: ["score_healthcare"] },
    { id: "soc_16", label: "Nombre d'aires de covoiturage pour 10.000 habitants", category: "Essentiels", primaryNeed: "score_social_cohesion" },
    { id: "soc_17", label: "Nombre de trajets en covoiturage pour 10.000 habitants", category: "Essentiels", primaryNeed: "score_social_cohesion" },
    { id: "soc_18", label: "Durée moyenne de déplacement par jour et par personne", category: "Essentiels", primaryNeed: "score_social_cohesion" },
  ],
  score_nature: [
    { id: "nat_1", label: "Cartographie des sentiers de randonnée et espaces naturels accessibles au public", category: "Essentiels", primaryNeed: "score_nature" },
    { id: "nat_2", label: "Part de la surface du territoire consommée entre 2009 et 2021", category: "Essentiels", primaryNeed: "score_nature", secondaryNeeds: ["score_healthcare", "score_local_economy"] },
    { id: "nat_3", label: "Part des communes couvertes par un Atlas de la Biodiversité Communale (ABC)", category: "Essentiels", primaryNeed: "score_nature" },
    { id: "nat_4", label: "Identification d'un agent-référent sur les enjeux des espaces verts et biodiversité", category: "Essentiels", primaryNeed: "score_nature" },
    { id: "nat_5", label: "Identification d'un élu-référent sur les enjeux des espaces verts et biodiversité", category: "Essentiels", primaryNeed: "score_nature", secondaryNeeds: ["score_healthcare"] },
    { id: "nat_6", label: "Existence d'un document-cadre intercommunal pour la protection de la biodiversité", category: "Essentiels", primaryNeed: "score_nature", secondaryNeeds: ["score_housing"] },
    { id: "nat_7", label: "Existence d'un document-cadre en matière d'économie circulaire", category: "Essentiels", primaryNeed: "score_nature", secondaryNeeds: ["score_healthcare"] },
    { id: "nat_8", label: "Nombre d'équipements total pour 1000 habitants", category: "Essentiels", primaryNeed: "score_nature", secondaryNeeds: ["score_housing", "score_local_economy"] },
    { id: "nat_9", label: "Part des emplois de la sphère présentielle", category: "Essentiels", primaryNeed: "score_nature", secondaryNeeds: ["score_education"] },
    { id: "nat_10", label: "Part des emplois jugés à risque dans un contexte bas-carbone", category: "Essentiels", primaryNeed: "score_nature" },
    { id: "nat_11", label: "Indicateur de dépendance économique (taux d'actifs / taux d'inactifs)", category: "Essentiels", primaryNeed: "score_nature" },
    { id: "nat_12", label: "Part des emplois dans l'économie sociale et solidaire", category: "Essentiels", primaryNeed: "score_nature" },
    { id: "nat_13", label: "Nombre d'ateliers de réparation vélo pour 1000 hab", category: "Essentiels", primaryNeed: "score_nature" },
  ],
  score_local_economy: [
    { id: "eco_1", label: "Existence d'un dispositif de tarification incitative sur la collecte des déchets", category: "Induits", primaryNeed: "score_local_economy" },
    { id: "eco_2", label: "Taux de valorisation matière et organique des déchets ménagers et assimilés", category: "Induits", primaryNeed: "score_local_economy", secondaryNeeds: ["score_social_cohesion"] },
    { id: "eco_3", label: "Part des achats publics intégrant au moins une considération environnementale", category: "Induits", primaryNeed: "score_local_economy" },
    { id: "eco_4", label: "Identification d'un agent-référent sur les enjeux économiques", category: "Induits", primaryNeed: "score_local_economy" },
    { id: "eco_5", label: "Identification d'un élu référent sur les enjeux économiques", category: "Induits", primaryNeed: "score_local_economy", secondaryNeeds: ["score_social_cohesion"] },
    { id: "eco_6", label: "Existence d'un Projet Éducatif Territorial (PEDT)", category: "Induits", primaryNeed: "score_local_economy", secondaryNeeds: ["score_social_cohesion"] },
    { id: "eco_7", label: "Indice de fragilité numérique", category: "Induits", primaryNeed: "score_local_economy" },
    { id: "eco_8", label: "Nombre de lieux de médiation numérique pour 10.000 habitants", category: "Induits", primaryNeed: "score_local_economy" },
    { id: "eco_9", label: "Nombre de médias locaux indépendants à l'échelle départementale", category: "Induits", primaryNeed: "score_local_economy" },
    { id: "eco_10", label: "Distance moyenne aux bibliothèques", category: "Induits", primaryNeed: "score_local_economy" },
    { id: "eco_11", label: "Part des établissements scolaires engagés dans une démarche E3D", category: "Induits", primaryNeed: "score_local_economy" },
    { id: "eco_12", label: "Part des communes avec programmation événementielle transition écologique", category: "Induits", primaryNeed: "score_local_economy" },
  ],
  score_energy: [
    { id: "ener_1", label: "Existence d'un schéma directeur des énergies (SDE) à jour et mis en oeuvre", category: "Induits", primaryNeed: "score_energy" },
    { id: "ener_2", label: "Consommation énergétique du secteur résidentiel par habitant", category: "Induits", primaryNeed: "score_energy", secondaryNeeds: ["score_housing"] },
    { id: "ener_3", label: "Identification du territoire comme une zone électrique fragile", category: "Induits", primaryNeed: "score_energy" },
    { id: "ener_4", label: "Émissions de gaz à effet de serre énergétiques territoriales par habitant", category: "Induits", primaryNeed: "score_energy" },
    { id: "ener_5", label: "Existence d'un PCAET à jour et mis en oeuvre", category: "Induits", primaryNeed: "score_energy" },
    { id: "ener_6", label: "Niveau d'ambition de la trajectoire de réduction des consommations d'énergie", category: "Induits", primaryNeed: "score_energy" },
    { id: "ener_7", label: "Identification d'un agent-référent sur les enjeux énergétiques", category: "Induits", primaryNeed: "score_energy", secondaryNeeds: ["score_healthcare", "score_mobility", "score_housing"] },
    { id: "ener_8", label: "Identification d'un élu-référent sur les enjeux énergétiques", category: "Induits", primaryNeed: "score_energy", secondaryNeeds: ["score_housing", "score_mobility", "score_local_economy"] },
    { id: "ener_9", label: "Identification d'un agent-référent sur les enjeux de logement", category: "Induits", primaryNeed: "score_energy" },
    { id: "ener_10", label: "Identification d'un élu-référent sur les enjeux de logement", category: "Induits", primaryNeed: "score_energy" },
    { id: "ener_11", label: "Nombre de sites SEVESO (ou ICPE seuil autorisation) sur le territoire", category: "Induits", primaryNeed: "score_energy" },
    { id: "ener_12", label: "Part des risques majeurs Georisques bénéficiant d'une fiche-action dans le PiCS", category: "Induits", primaryNeed: "score_energy" },
  ],
  score_mobility: [
    { id: "mob_1", label: "Part de la population éloignée des équipements de services intermédiaires (plus de 7 minutes)", category: "Induits", primaryNeed: "score_mobility" },
    { id: "mob_2", label: "Taux de précarité énergétique mobilité", category: "Induits", primaryNeed: "score_mobility", secondaryNeeds: ["score_local_economy", "score_social_cohesion"] },
    { id: "mob_3", label: "Nombre d'itinéraires d'évacuation et de secours", category: "Induits", primaryNeed: "score_mobility", secondaryNeeds: ["score_local_economy", "score_social_cohesion", "score_education"] },
    { id: "mob_4", label: "Part des déplacements domicile-travail en voiture", category: "Induits", primaryNeed: "score_mobility", secondaryNeeds: ["score_energy", "score_local_economy"] },
    { id: "mob_5", label: "Evolution de la part des déplacements domicile-travail en voiture (2016-2022)", category: "Induits", primaryNeed: "score_mobility" },
    { id: "mob_6", label: "Distance moyenne entre le domicile et le travail", category: "Induits", primaryNeed: "score_mobility", secondaryNeeds: ["score_security"] },
    { id: "mob_7", label: "Taux du parc de véhicules électrifié", category: "Induits", primaryNeed: "score_mobility" },
    { id: "mob_8", label: "Existence d'un service de transport en commun intercommunal", category: "Induits", primaryNeed: "score_mobility" },
    { id: "mob_9", label: "Nombre de stations de transport en commun pour 1000 habitants", category: "Induits", primaryNeed: "score_mobility", secondaryNeeds: ["score_local_economy"] },
    { id: "mob_10", label: "Part de voitures avec vignette Crit'Air E ou Crit'Air 1", category: "Induits", primaryNeed: "score_mobility" },
    { id: "mob_11", label: "Nombre de kilomètres d'aménagements cyclables par km² urbanisé", category: "Induits", primaryNeed: "score_mobility", secondaryNeeds: ["score_energy"] },
    { id: "mob_12", label: "Identification d'un agent-référent sur les enjeux de mobilité", category: "Induits", primaryNeed: "score_mobility" },
    { id: "mob_13", label: "Identification d'un élu référent sur les enjeux de mobilité", category: "Induits", primaryNeed: "score_mobility" },
    { id: "mob_14", label: "Identification d'un agent-référent sur les enjeux de santé", category: "Induits", primaryNeed: "score_mobility", secondaryNeeds: ["score_healthcare"] },
    { id: "mob_15", label: "Identification d'un élu référent sur les enjeux de santé", category: "Induits", primaryNeed: "score_mobility", secondaryNeeds: ["score_social_cohesion"] },
    { id: "mob_16", label: "Existence d'un document-cadre en matière de mobilité durable à jour", category: "Induits", primaryNeed: "score_mobility", secondaryNeeds: ["score_energy", "score_healthcare"] },
  ],
};

// Génère des scores simulés pour les indicateurs basés sur le score de la fonction
export const generateIndicatorScores = (
  needKey: string,
  baseScore: number
): Indicator[] => {
  const indicators = indicatorsByNeed[needKey] || [];
  return indicators.map((indicator) => ({
    ...indicator,
    // Génère un score variant autour du score de base (±15 points)
    score: Math.max(0, Math.min(100, baseScore + (Math.random() - 0.5) * 30)),
  }));
};

// Labels des catégories pour l'affichage
export const categoryLabels: Record<string, { label: string; color: string }> = {
  Vitaux: { label: "Besoin Vital", color: "hsl(var(--destructive))" },
  Essentiels: { label: "Besoin Essentiel", color: "hsl(var(--warning))" },
  Induits: { label: "Besoin Induit", color: "hsl(var(--primary))" },
};
